# ==============================================================================
# CONFIG AUTOGENERATED ON {{ ansible_date_time.iso8601 }}
# ==============================================================================

[Interface]
PrivateKey = {{ gateway.private_key }}
Address = {{ gateway.network }}
ListenPort = {{ gateway.listen_port }}
PostUp = iptables -A FORWARD -i {{ gateway.tunnel }} -j ACCEPT ; iptables -t nat -A POSTROUTING -o {{ gateway.interface }} -j MASQUERADE
PostDown = iptables -D FORWARD -i {{ gateway.tunnel }} -j ACCEPT; iptables -t nat -D POSTROUTING -o {{ gateway.interface }} -j MASQUERADE

{% for peer in gateway.peers %}
[Peer]
PublicKey = {{ peer.public_key }}
AllowedIPs = {{ peer.addr }}/32
{% endfor %}
